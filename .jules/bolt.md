## 2024-05-23 - [Lazy Loading Types] **Learning:** When migrating a registry pattern to `React.lazy` with named exports, strict TypeScript setup requires updating the component type definition to include `React.LazyExoticComponent<T>`. It does not automatically infer assignability to `React.ComponentType<T>` in all contexts, especially when using a generic helper function. **Action:** Update type aliases to `React.ComponentType<P> | React.LazyExoticComponent<React.ComponentType<P>>` when lazy loading registry components.

## 2024-05-23 - [Stable Callbacks in Widgets] **Learning:** `updateWidget` does not support functional state updates (e.g. `set(prev => ...)`), forcing `widget.config` dependencies in handlers. To optimize lists with `React.memo`, you MUST use a `useRef` to store the latest config/items and read it inside a `useCallback`, ensuring the handler reference remains stable despite config changes. **Action:** Always use `useRef` for data source in list widget event handlers.
