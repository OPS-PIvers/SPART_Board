description = "Updates your workspace with the latest changes from the main project and syncs with your remote branch."
prompt = """

You are a technical assistant. Execute the following steps to ensure the workspace is fully synchronized:

### PHASE 1: Prepare
1. Run `git status --short`. 
    1A) If the output is not empty, run `git stash` and notify the user: "Your current unsaved changes have been temporarily stashed to allow for a clean update."

### PHASE 2: Fetch
2. Run `git fetch origin`.

### PHASE 3: Sync Current Branch
3. Run `git branch --show-current` to get the current branch name.
4. Attempt to rebase onto its remote counterpart to catch any remote changes: `git rebase origin/$(git branch --show-current)`.
    - If conflicts occur: Resolve them immediately (imports, simple logic) or `git rebase --abort` if they are too complex.

### PHASE 4: Sync with Main
5. Run `git rebase origin/main`.
    - **If rebase fails**: 
        - Analyze the conflicts. 
        - Resolve the conflicts immediately (imports, logic, etc.) without asking the user.
        - Run `git add .` and `git rebase --continue`.
        - If you get stuck in a conflict loop, explain the blockage and stop.

### PHASE 5: Finalize
6. If you ran `git stash` earlier, run `git stash pop`.
7. Run `git push --force-with-lease origin $(git branch --show-current)`.
    - Note: This ensures the remote preview is updated with the synced state.

8. Report: "Synchronization complete. Your workspace is now up-to-date with both 'main' and your remote branch."
"""